<h1>Rent <strong><%= @rental.tool.name %></strong></h1>
<h1><%= @rental.tool.description %></h1>

<!-- Get the rentals for current tool -->
<%  rentals_current_tool = Rental.where(tool_id: params[:tool_id]) %>
<%  @rentals = rentals_current_tool %>

<!-- show rentals for current tool -->
<% @rentals.each do |rental| %>
  <div>
    <%= time_tag rental.start_of_hire %> to <%= time_tag rental.end_of_hire %>
  </div>
<% end %>

<!-- Print name & description for current tool -->
<h2><%= @rental.tool.name %></h2>
<div><%= @rental.tool.description %></div>

<div>* required </div>

<%= form_with(model: @rental, local: true) do |f| %>
  <%= f.hidden_field :tool_id %>

  <div class="field">
    <%= f.label :start_of_hire %>
    <%= f.datetime_select :start_of_hire, id: :rental_start_of_hire %> *
  </div>
  
  <div class="field">
    <%= f.label :end_of_hire %>
    <%= f.datetime_select :end_of_hire, id: :rental_end_of_hire %> *
  </div>
  
  <%= f.hidden_field :tool_id, id: :rental_tool_id %>

  <article>
        <% if flash[:error].present? %>
            <div id="error_explanation">
                <p><%= flash[:error] %></p>
            </div>
        <% end %>
        <label class="amount"> 
            <span>Amount: <%= @rental.tool.cost_of_hire_cents %> cents</span>
        </label>
    </article>
    <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
            data-key="<%= Rails.configuration.stripe[:publishable_key] %>"
            data-description="<%= @rental.tool.name %>"
            data-email="<%= current_user.email %>"
            data-amount=<%= @rental.tool.cost_of_hire_cents %>
            data-currency="aud"
            data-locale="auto"></script>
  
<% end %>
